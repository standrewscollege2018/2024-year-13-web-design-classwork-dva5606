{"version":3,"file":"_server.ts-D0Z9whCc.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/speechToText/_server.ts.js"],"sourcesContent":["import fs from \"fs\";\nimport path from \"path\";\nimport OpenAI from \"openai\";\nconst openai = new OpenAI({ apiKey: \"\" });\nasync function POST({ request }) {\n  try {\n    const audioBuffer = await request.arrayBuffer();\n    const audioBufferUint8Array = new Uint8Array(audioBuffer);\n    const audioFilePath = path.join(process.cwd(), \"temp_audio.mp3\");\n    await fs.promises.writeFile(audioFilePath, audioBufferUint8Array);\n    const transcription = await openai.audio.transcriptions.create({\n      file: fs.createReadStream(audioFilePath),\n      model: \"whisper-1\"\n    });\n    await fs.promises.unlink(audioFilePath);\n    return new Response(JSON.stringify({ transcription: transcription.text }), {\n      status: 200,\n      headers: { \"Content-Type\": \"application/json\" }\n    });\n  } catch (error) {\n    console.error(\"Error transcribing audio:\", error);\n    return new Response(JSON.stringify({ message: \"Failed to transcribe audio.\" }), {\n      status: 500\n    });\n  }\n}\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;AAGA,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,EAAE,MAAM,EAAE,qDAAqD,EAAE,CAAC,CAAC;AAC7F,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE;AACjC,EAAE,IAAI;AACN,IAAI,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC,WAAW,EAAE,CAAC;AACpD,IAAI,MAAM,qBAAqB,GAAG,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC;AAC9D,IAAI,MAAM,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,gBAAgB,CAAC,CAAC;AACrE,IAAI,MAAM,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,aAAa,EAAE,qBAAqB,CAAC,CAAC;AACtE,IAAI,MAAM,aAAa,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,CAAC;AACnE,MAAM,IAAI,EAAE,EAAE,CAAC,gBAAgB,CAAC,aAAa,CAAC;AAC9C,MAAM,KAAK,EAAE,WAAW;AACxB,KAAK,CAAC,CAAC;AACP,IAAI,MAAM,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;AAC5C,IAAI,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,aAAa,EAAE,aAAa,CAAC,IAAI,EAAE,CAAC,EAAE;AAC/E,MAAM,MAAM,EAAE,GAAG;AACjB,MAAM,OAAO,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE;AACrD,KAAK,CAAC,CAAC;AACP,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,2BAA2B,EAAE,KAAK,CAAC,CAAC;AACtD,IAAI,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,OAAO,EAAE,6BAA6B,EAAE,CAAC,EAAE;AACpF,MAAM,MAAM,EAAE,GAAG;AACjB,KAAK,CAAC,CAAC;AACP,GAAG;AACH;;;;"}